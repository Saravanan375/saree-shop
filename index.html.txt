<script>
const API_URL = "https://script.google.com/macros/s/AKfycbx2dhgXkstkMwrCVbF3fSLvp38YPYD1JWb6vvxhocsi04Tvd4Nyv8RITmARhmhwK8xceQ/exec";
let cart = [];

// fetch inventory list
fetch(API_URL + "?action=inventory")
  .then(res => res.json())
  .then(data => {
    if (!data.ok) {
      document.getElementById('productArea').innerText = "Failed to load products";
      return;
    }
    renderProducts(data.inventory);
  })
  .catch(err => {
    document.getElementById('productArea').innerText = "Error loading products";
    console.error(err);
  });

function renderProducts(list) {
  const div = document.getElementById('productArea');
  div.innerHTML = "";
  list.forEach(p => {
    div.innerHTML += `
      <div class="product-card">
        <img src="${p.image_url || 'https://via.placeholder.com/300x200'}" alt="${p.name}">
        <h3>${p.name}</h3>
        <p>Price: â‚¹${p.price}</p>
        <p>${p.description}</p>
        <button onclick="addItem('${p.id}', '${p.name}', ${p.price})">Add to Cart</button>
      </div>
    `;
  });
}

function addItem(id, name, price) {
  const item = cart.find(x => x.id === id);
  if (item) item.qty++;
  else cart.push({id, name, price, qty:1});
  alert("Added \"" + name + "\" to cart");
}
</script>

